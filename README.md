# Python Docker Image Size Comparison

This project demonstrates and benchmarks different approaches to containerizing a Python Flask application, comparing normal, distroless, and UV-based builds.

## Image Size Comparison

| Image Type   | Size  |
| ------------ | ----- |
| Normal (pip) | 226MB |
| Distroless   | 117MB |
| UV           | 98MB  |

## Project Structure

- `hello.py` - Simple Flask application serving "Hello, World!"
- `Dockerfile.normal` - Traditional Python slim-based Docker build
- `Dockerfile.distroless` - Google's distroless Python image build
- `Dockerfile.uv` - Modern build using UV package manager
- `docker-compose.yml` - Orchestrates all three container variants
- `pyproject.toml` - Project dependencies definition
- `requirements.txt` - Locked dependencies generated by `uv pip compile pyproject.toml -o requirements.txt`

## Getting Started

### Prerequisites

- Docker
- Docker Compose
- Make (optional)

### Running the Project

Start all containers:

```bash
make up
```

Clean up all containers and images:

```bash
make clean
```

### Accessing the Services

The services are available at:

- Normal build: http://localhost:8080
- Distroless build: http://localhost:8081
- UV build: http://localhost:8082

## Key Differences

1. **Normal Build**

   - Uses standard Python slim image
   - Traditional pip-based dependency installation
   - Largest image size but most familiar workflow

2. **Distroless Build**

   - Uses Google's distroless base image `gcr.io/distroless/python3`
   - Multi-stage build for dependency installation
   - Reduced attack surface and smaller image size

3. **UV Build**
   - Uses modern UV package manager
   - Fastest dependency resolution
   - **Smallest final image size**
   - Leverages build caching for faster builds
